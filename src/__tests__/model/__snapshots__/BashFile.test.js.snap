// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`creates 3nodes raft bash tessera 1`] = `
"java  -Xms128M -Xmx128M -jar $TESSERA_JAR -configfile /Users/angelapratt/projects/quorum-creator/network/3-nodes-raft-tessera-bash/qdata/c1/tessera-config-09-1.json >> /Users/angelapratt/projects/quorum-creator/network/3-nodes-raft-tessera-bash/qdata/logs/tessera1.log 2>&1 &
java  -Xms128M -Xmx128M -jar $TESSERA_JAR -configfile /Users/angelapratt/projects/quorum-creator/network/3-nodes-raft-tessera-bash/qdata/c2/tessera-config-09-2.json >> /Users/angelapratt/projects/quorum-creator/network/3-nodes-raft-tessera-bash/qdata/logs/tessera2.log 2>&1 &
java  -Xms128M -Xmx128M -jar $TESSERA_JAR -configfile /Users/angelapratt/projects/quorum-creator/network/3-nodes-raft-tessera-bash/qdata/c3/tessera-config-09-3.json >> /Users/angelapratt/projects/quorum-creator/network/3-nodes-raft-tessera-bash/qdata/logs/tessera3.log 2>&1 &

echo \\"Waiting until all Tessera nodes are running...\\"
DOWN=true
k=10
while \${DOWN}; do
    sleep 1
    DOWN=false
    for i in \`seq 1 3\`
    do
        if [ ! -S \\"qdata/c\${i}/tm.ipc\\" ]; then
            echo \\"Node \${i} is not yet listening on tm.ipc\\"
            DOWN=true
        fi

        set +e
        #NOTE: if using https, change the scheme
        #NOTE: if using the IP whitelist, change the host to an allowed host
        result=$(curl -s http://localhost:900\${i}/upcheck)
        set -e
        if [ ! \\"\${result}\\" == \\"I'm up!\\" ]; then
            echo \\"Node \${i} is not yet listening on http\\"
            DOWN=true
        fi
    done

    k=$((k - 1))
    if [ \${k} -le 0 ]; then
        echo \\"Tessera is taking a long time to start.  Look at the Tessera logs in qdata/logs/ for help diagnosing the problem.\\"
    fi
    echo \\"Waiting until all Tessera nodes are running...\\"

    sleep 5
done

echo \\"All Tessera nodes started\\"

PRIVATE_CONFIG=/Users/angelapratt/projects/quorum-creator/network/3-nodes-raft-tessera-bash/qdata/c1/tm.ipc nohup geth --datadir qdata/dd1 --nodiscover --rpc --rpccorsdomain=* --rpcvhosts=* --rpcaddr 0.0.0.0 --rpcapi admin,db,eth,debug,miner,net,shh,txpool,personal,web3,quorum,raft,quorumPermission --emitcheckpoints --unlock 0 --password /Users/angelapratt/projects/quorum-creator/network/3-nodes-raft-tessera-bash/qdata/dd1/keystore/password.txt --raft --raftport 50401 --permissioned --verbosity 5 --networkid 10 --rpcport 22000 --port 21000 2>>qdata/logs/1.log &
PRIVATE_CONFIG=/Users/angelapratt/projects/quorum-creator/network/3-nodes-raft-tessera-bash/qdata/c2/tm.ipc nohup geth --datadir qdata/dd2 --nodiscover --rpc --rpccorsdomain=* --rpcvhosts=* --rpcaddr 0.0.0.0 --rpcapi admin,db,eth,debug,miner,net,shh,txpool,personal,web3,quorum,raft,quorumPermission --emitcheckpoints --unlock 0 --password /Users/angelapratt/projects/quorum-creator/network/3-nodes-raft-tessera-bash/qdata/dd2/keystore/password.txt --raft --raftport 50402 --permissioned --verbosity 5 --networkid 10 --rpcport 22001 --port 21001 2>>qdata/logs/2.log &
PRIVATE_CONFIG=/Users/angelapratt/projects/quorum-creator/network/3-nodes-raft-tessera-bash/qdata/c3/tm.ipc nohup geth --datadir qdata/dd3 --nodiscover --rpc --rpccorsdomain=* --rpcvhosts=* --rpcaddr 0.0.0.0 --rpcapi admin,db,eth,debug,miner,net,shh,txpool,personal,web3,quorum,raft,quorumPermission --emitcheckpoints --unlock 0 --password /Users/angelapratt/projects/quorum-creator/network/3-nodes-raft-tessera-bash/qdata/dd3/keystore/password.txt --raft --raftport 50403 --permissioned --verbosity 5 --networkid 10 --rpcport 22002 --port 21002 2>>qdata/logs/3.log &"
`;
